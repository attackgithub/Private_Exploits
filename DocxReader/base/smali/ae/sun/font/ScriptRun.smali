.class public final Lae/sun/font/ScriptRun;
.super Ljava/lang/Object;
.source "ScriptRun.java"


# static fields
.field static final DONE:I = -0x1

.field static final LEAD_LIMIT:I = 0xdc00

.field static final LEAD_START:I = 0xd800

.field static final LEAD_SURROGATE_SHIFT:I = 0xa

.field static final SURROGATE_OFFSET:I = -0x35fdc00

.field static final SURROGATE_START:I = 0x10000

.field static final TAIL_LIMIT:I = 0xe000

.field static final TAIL_START:I = 0xdc00

.field private static final pairedCharExtra:I

.field private static final pairedCharPower:I

.field private static pairedChars:[I


# instance fields
.field private parenSP:I

.field private scriptCode:I

.field private scriptLimit:I

.field private scriptStart:I

.field private stack:[I

.field private text:[C

.field private textLimit:I

.field private textStart:I


# direct methods
.method static constructor <clinit>()V
    .locals 2

    .prologue
    .line 357
    const/16 v0, 0x22

    new-array v0, v0, [I

    fill-array-data v0, :array_0

    sput-object v0, Lae/sun/font/ScriptRun;->pairedChars:[I

    .line 377
    const/4 v0, 0x1

    sget-object v1, Lae/sun/font/ScriptRun;->pairedChars:[I

    array-length v1, v1

    invoke-static {v1}, Lae/sun/font/ScriptRun;->highBit(I)B

    move-result v1

    shl-int/2addr v0, v1

    sput v0, Lae/sun/font/ScriptRun;->pairedCharPower:I

    .line 378
    sget-object v0, Lae/sun/font/ScriptRun;->pairedChars:[I

    array-length v0, v0

    sget v1, Lae/sun/font/ScriptRun;->pairedCharPower:I

    sub-int/2addr v0, v1

    sput v0, Lae/sun/font/ScriptRun;->pairedCharExtra:I

    return-void

    .line 357
    nop

    :array_0
    .array-data 4
        0x28
        0x29
        0x3c
        0x3e
        0x5b
        0x5d
        0x7b
        0x7d
        0xab
        0xbb
        0x2018
        0x2019
        0x201c
        0x201d
        0x2039
        0x203a
        0x3008
        0x3009
        0x300a
        0x300b
        0x300c
        0x300d
        0x300e
        0x300f
        0x3010
        0x3011
        0x3014
        0x3015
        0x3016
        0x3017
        0x3018
        0x3019
        0x301a
        0x301b
    .end array-data
.end method

.method public constructor <init>()V
    .locals 0

    .prologue
    .line 86
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    .line 88
    return-void
.end method

.method public constructor <init>([CII)V
    .locals 0
    .param p1, "chars"    # [C
    .param p2, "start"    # I
    .param p3, "count"    # I

    .prologue
    .line 98
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    .line 100
    invoke-virtual {p0, p1, p2, p3}, Lae/sun/font/ScriptRun;->init([CII)V

    .line 101
    return-void
.end method

.method private static getPairIndex(I)I
    .locals 4
    .param p0, "ch"    # I

    .prologue
    .line 334
    sget v1, Lae/sun/font/ScriptRun;->pairedCharPower:I

    .line 335
    .local v1, "probe":I
    const/4 v0, 0x0

    .line 337
    .local v0, "index":I
    sget-object v2, Lae/sun/font/ScriptRun;->pairedChars:[I

    sget v3, Lae/sun/font/ScriptRun;->pairedCharExtra:I

    aget v2, v2, v3

    if-lt p0, v2, :cond_0

    .line 338
    sget v0, Lae/sun/font/ScriptRun;->pairedCharExtra:I

    .line 341
    :cond_0
    :goto_0
    const/4 v2, 0x1

    if-gt v1, v2, :cond_2

    .line 349
    sget-object v2, Lae/sun/font/ScriptRun;->pairedChars:[I

    aget v2, v2, v0

    if-eq v2, p0, :cond_1

    .line 350
    const/4 v0, -0x1

    .line 353
    :cond_1
    return v0

    .line 342
    :cond_2
    shr-int/lit8 v1, v1, 0x1

    .line 344
    sget-object v2, Lae/sun/font/ScriptRun;->pairedChars:[I

    add-int v3, v0, v1

    aget v2, v2, v3

    if-lt p0, v2, :cond_0

    .line 345
    add-int/2addr v0, v1

    goto :goto_0
.end method

.method private static final highBit(I)B
    .locals 3
    .param p0, "n"    # I

    .prologue
    const/16 v2, 0x10

    .line 292
    if-gtz p0, :cond_1

    .line 293
    const/16 v0, -0x20

    .line 323
    :cond_0
    :goto_0
    return v0

    .line 296
    :cond_1
    const/4 v0, 0x0

    .line 298
    .local v0, "bit":B
    const/high16 v1, 0x10000

    if-lt p0, v1, :cond_2

    .line 299
    shr-int/lit8 p0, p0, 0x10

    .line 300
    int-to-byte v0, v2

    .line 303
    :cond_2
    const/16 v1, 0x100

    if-lt p0, v1, :cond_3

    .line 304
    shr-int/lit8 p0, p0, 0x8

    .line 305
    add-int/lit8 v1, v0, 0x8

    int-to-byte v0, v1

    .line 308
    :cond_3
    if-lt p0, v2, :cond_4

    .line 309
    shr-int/lit8 p0, p0, 0x4

    .line 310
    add-int/lit8 v1, v0, 0x4

    int-to-byte v0, v1

    .line 313
    :cond_4
    const/4 v1, 0x4

    if-lt p0, v1, :cond_5

    .line 314
    shr-int/lit8 p0, p0, 0x2

    .line 315
    add-int/lit8 v1, v0, 0x2

    int-to-byte v0, v1

    .line 318
    :cond_5
    const/4 v1, 0x2

    if-lt p0, v1, :cond_0

    .line 319
    shr-int/lit8 p0, p0, 0x1

    .line 320
    add-int/lit8 v1, v0, 0x1

    int-to-byte v0, v1

    goto :goto_0
.end method

.method private final nextCodePoint()I
    .locals 6

    .prologue
    const v5, 0xdc00

    .line 246
    iget v2, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    iget v3, p0, Lae/sun/font/ScriptRun;->textLimit:I

    if-lt v2, v3, :cond_1

    .line 247
    const/4 v0, -0x1

    .line 257
    :cond_0
    :goto_0
    return v0

    .line 249
    :cond_1
    iget-object v2, p0, Lae/sun/font/ScriptRun;->text:[C

    iget v3, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    add-int/lit8 v4, v3, 0x1

    iput v4, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    aget-char v0, v2, v3

    .line 250
    .local v0, "ch":I
    const v2, 0xd800

    if-lt v0, v2, :cond_0

    if-ge v0, v5, :cond_0

    iget v2, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    iget v3, p0, Lae/sun/font/ScriptRun;->textLimit:I

    if-ge v2, v3, :cond_0

    .line 251
    iget-object v2, p0, Lae/sun/font/ScriptRun;->text:[C

    iget v3, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    aget-char v1, v2, v3

    .line 252
    .local v1, "nch":I
    if-lt v1, v5, :cond_0

    const v2, 0xe000

    if-ge v1, v2, :cond_0

    .line 253
    iget v2, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    add-int/lit8 v2, v2, 0x1

    iput v2, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    .line 254
    shl-int/lit8 v2, v0, 0xa

    add-int/2addr v2, v1

    const v3, -0x35fdc00

    add-int v0, v2, v3

    goto :goto_0
.end method

.method private final pushback(I)V
    .locals 1
    .param p1, "ch"    # I

    .prologue
    .line 261
    if-ltz p1, :cond_0

    .line 262
    const/high16 v0, 0x10000

    if-lt p1, v0, :cond_1

    .line 263
    iget v0, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    add-int/lit8 v0, v0, -0x2

    iput v0, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    .line 268
    :cond_0
    :goto_0
    return-void

    .line 265
    :cond_1
    iget v0, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    add-int/lit8 v0, v0, -0x1

    iput v0, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    goto :goto_0
.end method

.method private static sameScript(II)Z
    .locals 1
    .param p0, "scriptOne"    # I
    .param p1, "scriptTwo"    # I

    .prologue
    const/4 v0, 0x1

    .line 280
    if-eq p0, p1, :cond_0

    if-le p0, v0, :cond_0

    if-le p1, v0, :cond_0

    const/4 v0, 0x0

    :cond_0
    return v0
.end method


# virtual methods
.method public final getScriptCode()I
    .locals 1

    .prologue
    .line 144
    iget v0, p0, Lae/sun/font/ScriptRun;->scriptCode:I

    return v0
.end method

.method public final getScriptLimit()I
    .locals 1

    .prologue
    .line 134
    iget v0, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    return v0
.end method

.method public final getScriptStart()I
    .locals 1

    .prologue
    .line 125
    iget v0, p0, Lae/sun/font/ScriptRun;->scriptStart:I

    return v0
.end method

.method public init([CII)V
    .locals 1
    .param p1, "chars"    # [C
    .param p2, "start"    # I
    .param p3, "count"    # I

    .prologue
    .line 105
    if-eqz p1, :cond_0

    if-ltz p2, :cond_0

    if-ltz p3, :cond_0

    array-length v0, p1

    sub-int/2addr v0, p2

    if-le p3, v0, :cond_1

    .line 106
    :cond_0
    new-instance v0, Ljava/lang/IllegalArgumentException;

    invoke-direct {v0}, Ljava/lang/IllegalArgumentException;-><init>()V

    throw v0

    .line 109
    :cond_1
    iput-object p1, p0, Lae/sun/font/ScriptRun;->text:[C

    .line 110
    iput p2, p0, Lae/sun/font/ScriptRun;->textStart:I

    .line 111
    add-int v0, p2, p3

    iput v0, p0, Lae/sun/font/ScriptRun;->textLimit:I

    .line 113
    iget v0, p0, Lae/sun/font/ScriptRun;->textStart:I

    iput v0, p0, Lae/sun/font/ScriptRun;->scriptStart:I

    .line 114
    iget v0, p0, Lae/sun/font/ScriptRun;->textStart:I

    iput v0, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    .line 115
    const/4 v0, -0x1

    iput v0, p0, Lae/sun/font/ScriptRun;->scriptCode:I

    .line 116
    const/4 v0, 0x0

    iput v0, p0, Lae/sun/font/ScriptRun;->parenSP:I

    .line 117
    return-void
.end method

.method public final next()Z
    .locals 12

    .prologue
    const/4 v8, -0x1

    const/4 v7, 0x1

    const/4 v6, 0x0

    .line 154
    iget v5, p0, Lae/sun/font/ScriptRun;->parenSP:I

    .line 157
    .local v5, "startSP":I
    iget v9, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    iget v10, p0, Lae/sun/font/ScriptRun;->textLimit:I

    if-lt v9, v10, :cond_0

    .line 232
    :goto_0
    return v6

    .line 161
    :cond_0
    iput v6, p0, Lae/sun/font/ScriptRun;->scriptCode:I

    .line 162
    iget v9, p0, Lae/sun/font/ScriptRun;->scriptLimit:I

    iput v9, p0, Lae/sun/font/ScriptRun;->scriptStart:I

    .line 166
    :cond_1
    :goto_1
    invoke-direct {p0}, Lae/sun/font/ScriptRun;->nextCodePoint()I

    move-result v0

    .local v0, "ch":I
    if-ne v0, v8, :cond_2

    :goto_2
    move v6, v7

    .line 232
    goto :goto_0

    .line 167
    :cond_2
    invoke-static {v0}, Lae/sun/font/ScriptRunData;->getScript(I)I

    move-result v4

    .line 168
    .local v4, "sc":I
    if-nez v4, :cond_6

    invoke-static {v0}, Lae/sun/font/ScriptRun;->getPairIndex(I)I

    move-result v2

    .line 176
    .local v2, "pairIndex":I
    :goto_3
    if-ltz v2, :cond_4

    .line 177
    and-int/lit8 v9, v2, 0x1

    if-nez v9, :cond_8

    .line 178
    iget-object v9, p0, Lae/sun/font/ScriptRun;->stack:[I

    if-nez v9, :cond_7

    .line 179
    const/16 v9, 0x20

    new-array v9, v9, [I

    iput-object v9, p0, Lae/sun/font/ScriptRun;->stack:[I

    .line 186
    :cond_3
    :goto_4
    iget-object v9, p0, Lae/sun/font/ScriptRun;->stack:[I

    iget v10, p0, Lae/sun/font/ScriptRun;->parenSP:I

    add-int/lit8 v11, v10, 0x1

    iput v11, p0, Lae/sun/font/ScriptRun;->parenSP:I

    aput v2, v9, v10

    .line 187
    iget-object v9, p0, Lae/sun/font/ScriptRun;->stack:[I

    iget v10, p0, Lae/sun/font/ScriptRun;->parenSP:I

    add-int/lit8 v11, v10, 0x1

    iput v11, p0, Lae/sun/font/ScriptRun;->parenSP:I

    iget v11, p0, Lae/sun/font/ScriptRun;->scriptCode:I

    aput v11, v9, v10

    .line 204
    :cond_4
    :goto_5
    iget v9, p0, Lae/sun/font/ScriptRun;->scriptCode:I

    invoke-static {v9, v4}, Lae/sun/font/ScriptRun;->sameScript(II)Z

    move-result v9

    if-eqz v9, :cond_d

    .line 205
    iget v9, p0, Lae/sun/font/ScriptRun;->scriptCode:I

    if-gt v9, v7, :cond_5

    if-le v4, v7, :cond_5

    .line 206
    iput v4, p0, Lae/sun/font/ScriptRun;->scriptCode:I

    .line 210
    :goto_6
    iget v9, p0, Lae/sun/font/ScriptRun;->parenSP:I

    if-lt v5, v9, :cond_c

    .line 218
    :cond_5
    if-lez v2, :cond_1

    and-int/lit8 v9, v2, 0x1

    if-eqz v9, :cond_1

    iget v9, p0, Lae/sun/font/ScriptRun;->parenSP:I

    if-lez v9, :cond_1

    .line 219
    iget v9, p0, Lae/sun/font/ScriptRun;->parenSP:I

    add-int/lit8 v9, v9, -0x2

    iput v9, p0, Lae/sun/font/ScriptRun;->parenSP:I

    goto :goto_1

    .end local v2    # "pairIndex":I
    :cond_6
    move v2, v8

    .line 168
    goto :goto_3

    .line 180
    .restart local v2    # "pairIndex":I
    :cond_7
    iget v9, p0, Lae/sun/font/ScriptRun;->parenSP:I

    iget-object v10, p0, Lae/sun/font/ScriptRun;->stack:[I

    array-length v10, v10

    if-ne v9, v10, :cond_3

    .line 181
    iget-object v9, p0, Lae/sun/font/ScriptRun;->stack:[I

    array-length v9, v9

    add-int/lit8 v9, v9, 0x20

    new-array v1, v9, [I

    .line 182
    .local v1, "newstack":[I
    iget-object v9, p0, Lae/sun/font/ScriptRun;->stack:[I

    iget-object v10, p0, Lae/sun/font/ScriptRun;->stack:[I

    array-length v10, v10

    invoke-static {v9, v6, v1, v6, v10}, Ljava/lang/System;->arraycopy(Ljava/lang/Object;ILjava/lang/Object;II)V

    .line 183
    iput-object v1, p0, Lae/sun/font/ScriptRun;->stack:[I

    goto :goto_4

    .line 188
    .end local v1    # "newstack":[I
    :cond_8
    iget v9, p0, Lae/sun/font/ScriptRun;->parenSP:I

    if-lez v9, :cond_4

    .line 189
    and-int/lit8 v3, v2, -0x2

    .line 191
    .local v3, "pi":I
    :cond_9
    iget v9, p0, Lae/sun/font/ScriptRun;->parenSP:I

    add-int/lit8 v9, v9, -0x2

    iput v9, p0, Lae/sun/font/ScriptRun;->parenSP:I

    if-ltz v9, :cond_a

    iget-object v9, p0, Lae/sun/font/ScriptRun;->stack:[I

    iget v10, p0, Lae/sun/font/ScriptRun;->parenSP:I

    aget v9, v9, v10

    if-ne v9, v3, :cond_9

    .line 193
    :cond_a
    iget v9, p0, Lae/sun/font/ScriptRun;->parenSP:I

    if-ltz v9, :cond_b

    .line 194
    iget-object v9, p0, Lae/sun/font/ScriptRun;->stack:[I

    iget v10, p0, Lae/sun/font/ScriptRun;->parenSP:I

    add-int/lit8 v10, v10, 0x1

    aget v4, v9, v10

    .line 198
    :goto_7
    iget v9, p0, Lae/sun/font/ScriptRun;->parenSP:I

    if-ge v9, v5, :cond_4

    .line 199
    iget v5, p0, Lae/sun/font/ScriptRun;->parenSP:I

    goto :goto_5

    .line 196
    :cond_b
    iput v6, p0, Lae/sun/font/ScriptRun;->parenSP:I

    goto :goto_7

    .line 211
    .end local v3    # "pi":I
    :cond_c
    iget-object v9, p0, Lae/sun/font/ScriptRun;->stack:[I

    add-int/lit8 v10, v5, 0x1

    iget v11, p0, Lae/sun/font/ScriptRun;->scriptCode:I

    aput v11, v9, v10

    .line 212
    add-int/lit8 v5, v5, 0x2

    goto :goto_6

    .line 225
    :cond_d
    invoke-direct {p0, v0}, Lae/sun/font/ScriptRun;->pushback(I)V

    goto/16 :goto_2
.end method
